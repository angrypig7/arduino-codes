# TASKING EDE (Windows based integrated Embedded Development Environment)
#
# This makefile has been generated by TASKING EDE
#
# Toolchain: TASKING 8051
#

PROJ    = free documents
PROJDIR = 
PRODDIR = c:\program files\altium2004\system\tasking

BINDIR  = $(PRODDIR)\bin
INCDIR  = $(PRODDIR)\include
LIBDIR  = $(PRODDIR)\lib

OPT_CPU=-Ctsk51a
OPT_ARCH=-T51

OPT_CC  = -Ml --reentrant --vector-offset=0x0000 -I"$(PRODDIR)\include" -O2 --tradeoff=4 --iso=99 --language=+strings --debug-info --source
OPT_AS  = -I"$(PRODDIR)\include" -Wa-Ogs -Wa-gs -Wa-il
OPT_LK  = -c"free documents:IHEX" -lc51lr -lrt51 -lfp51lrt -L"$(PRODDIR)\lib" -O1 -M -m1 -d"free documents.lsl" -d"51.lsl"
OPT_XVW = "free documents.abs" -tcfg disim51.cfg -i--load_application_download=true --load_application_signal=true --load_application_target_reset=true --load_application_program_reset=true --load_application_goto_main=true -C tsk51a -G ""

all : "$(PROJ).abs"

"free documents_cstart.src" : "free documents_cstart.c" <1071967407>
ifdef PREPROCESS
    @echo Preprocessing ${*F}.c to ${*F}.pre
    @"$(PRODDIR)\bin\tcc.exe" "free documents_cstart.c" -f <<EOF 
    $(OPT_ARCH) $(OPT_CPU) $(OPT_CC) -E$(PREPROCESSFLAGS) -o "$*.pre"
    EOF
endif
    @echo Compiling ${*F}.c
    @"$(PRODDIR)\bin\tcc.exe" -cs "free documents_cstart.c" -o $@ -f<<EOF
    $(OPT_ARCH) $(OPT_CPU) $(OPT_CC)
    EOF

"free documents_cstart.obj" : "free documents_cstart.src" <1071967407>
	@echo Assembling ${*F}.src
    @"$(PRODDIR)\bin\tcc.exe" -c "free documents_cstart.src" -f<<EOF
    $(OPT_ARCH) $(OPT_CPU) $(OPT_AS) -o $@
    EOF

"$(PROJ).abs" : "free documents_cstart.obj" "free documents.lsl" <1071967407>
	@echo Linking and Locating
    @"$(PRODDIR)\bin\tlk.exe" -o $@:IEEE -f<<EOF
    $(separate "\n" $(match .obj $!))
    $(separate "\n" $(match .lib $!))
    $(DUMMY) $(OPT_LK)
    EOF

clean :
	$(exist "free documents_cstart.src" del "free documents_cstart.src")
	$(exist "free documents_cstart.obj" del "free documents_cstart.obj")
	$(exist "$(PROJ).abs" del "$(PROJ).abs")

# Copyright 1997-2003 Altium BV
# Serial#:	000000
# EDE Version:	99.9r9 (Build 123)
